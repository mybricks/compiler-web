!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@mybricks/rxui")):"function"==typeof define&&define.amd?define(["react","@mybricks/rxui"],t):"object"==typeof exports?exports.xgCompilerWeb=t(require("react"),require("@mybricks/rxui")):e.xgCompilerWeb=t(e.react,e["@mybricks/rxui"])}(this,(function(e,t){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){var o=n(5),r=n(6);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};o(r,i);e.exports=r.locals||{}},function(t,n){t.exports=e},function(e){e.exports=JSON.parse('{"name":"@mybricks/compiler-web","version":"0.0.95","main":"main.js","scripts":{"test":"jest","build":"webpack --config build/webpack.build.js -p","build-all":"webpack --config build/webpack.build-all.js -p","build-bundle":"webpack --config build/webpack.build-bundle.js -p","dev":"webpack-dev-server --config build/webpack.dev.js","watch-all":"webpack-dev-server --config build/webpack.watch-all.js","xg":"webpack-dev-server --config build/webpack.xg.js"},"author":"CheMingjun","license":"","dependencies":{"@mybricks/compiler-js":"0.0.13","@mybricks/rxui":"1.0.55"},"devDependencies":{"@babel/core":"^7.8.7","@babel/plugin-proposal-class-properties":"^7.8.3","@babel/preset-env":"^7.8.7","@babel/preset-react":"^7.8.3","@types/node":"^13.9.0","@types/react":"^16.9.23","@types/react-dom":"^16.9.5","babel-loader":"^8.0.6","commitizen":"^4.1.5","core-js":"^2.6.11","css-loader":"^3.4.2","cz-conventional-changelog":"^3.2.0","less":"^3.11.1","less-loader":"^5.0.0","raw-loader":"^4.0.1","rimraf":"^3.0.2","style-loader":"^1.1.3","ts-loader":"^6.2.1","typescript":"^3.9.3","url-loader":"^4.1.1","webpack":"^4.42.0","webpack-bundle-analyzer":"^3.6.1","webpack-cli":"^3.3.11","webpack-dev-server":"^3.10.3","webpack-merge":"^4.2.2"}}')},function(e,t,n){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('{"name":"@mybricks/compiler-js","version":"0.0.13","main":"index.min.js","scripts":{"test":"jest","build":"webpack --config build/webpack.config.js"},"author":"CheMingjun","license":"MIT","devDependencies":{"@types/jest":"^25.1.1","@types/node":"^13.9.0","jest":"^26.0.1","ts-jest":"^26.1.0","ts-loader":"^6.2.1","webpack":"^4.42.0","webpack-bundle-analyzer":"^3.6.1","webpack-cli":"^3.3.11"},"publishConfig":{"registry":"https://registry.npmjs.org"}}')},function(e,t,n){"use strict";n.r(t),n.d(t,"UNDEFINED_FRAME_LABEL",(function(){return r})),n.d(t,"compile",(function(){return j})),n.d(t,"createIO",(function(){return E})),n.d(t,"E_ItemType",(function(){return i})),n.d(t,"T_Scope",(function(){})),n.d(t,"I_Frame",(function(){})),n.d(t,"T_PinDirection",(function(){})),n.d(t,"I_Joint",(function(){})),n.d(t,"I_Node",(function(){})),n.d(t,"I_Pin",(function(){})),n.d(t,"I_Runner",(function(){})),n.d(t,"isTypeof",(function(){return c}));var o=n(0);const r="UNDEFINED_FRAME_LABEL";var i,s;function c(e,t){return e&&"object"==typeof e&&e._type==t}function u(){let e="abcdefhijkmnprstwxyz",t=e.length,n="";for(let o=0;o<6;o++)n+=e.charAt(Math.floor(Math.random()*t));return"u_"+n}function a(e,t,n="runtime"){let o=e;o._exe||(o._exe=function(n,r,s,u){if(!b())return;const a=e.finishPin.forkedFrom||e.finishPin;if("function"==typeof a._exe)v.debug&&v.debug.stepTime,a._exe(n,r,s,u);else{const n=c(e.startPin.parent,i.NODE)?e.startPin.parent:void 0;t.onError({type:"con",id:e.id},`连接(来自:${n?n.title:"未知组件"}，${o.title})已断开.`)}})}function l(e,t,n="runtime"){e.conAry&&e.conAry.forEach(e=>{a(e,t)}),e._exe=function(o,r,s,u){if(!b())return;_.execute&&_.execute(i.PIN,e.id,r);let a=o;if(!a)if(c(e.parent,i.NODE)){const t=e.parent.parent;a=t._scopeManager.getCurrentScope(!t._exeAsRoot_&&t.parent?t.parent.id:void 0,t.id)}else if(c(e.parent,i.FRAME)){const t=e.parent;a=t._scopeManager.getCurrentScope(!t._exeAsRoot_&&t.parent?t.parent.id:void 0,t.id)}let l=t.pin?t.pin(e):void 0;if(l&&!1===l.exe(r,u))return;const p=t=>{l&&l.exe(t,e,"返回"),"function"==typeof s&&s(t)};if("input"==e.direction)e.proxyPin&&e.proxyPin._exe?e.proxyPin.parent._exe(a,{[e.hostId]:r},void 0,e.direction):e.parent._exe(a,void 0,{[e.hostId]:r},p);else if("inner-input"===e.direction){if(!e.proxyPin||!e.proxyPin._exe)return;e.proxyPin._exe(a.parent,r,p,u)}else"output"!=e.direction&&"inner-output"!=e.direction||Promise.resolve().then(()=>{if(e.proxyPin&&e.proxyPin._exe)e.proxyPin._exe(o.parent,r,p,u);else{let t;"mock"===n&&e.mockData&&(t=e.mockData),e.conAry&&e.conAry.length>0&&e.conAry.forEach((n,o)=>{let i;p&&(void 0!==t?p(JSON.parse(e.mockData)):i=function(e){p(e)}),n._exe(a,r,i,e)})}})}}function p(e,t,n="runtime"){s.each(e=>l(e,t,n),e.inputPins,e.inputPinExts,e.inputPinsInModel),s.each(e=>l(e,t,n),e.outputPins,e.inputPinExts,e.outputPinsInModel);const o=e,i=t.node(e),c={};o._exe=function(n,o,u,a){let l;s.each(e=>{void 0!==e.dummyData&&(!l&&(l={}),l[e.hostId]=e.dummyData)},e.inputPins,e.inputPinsInModel),u=l?Object.assign(l,u):u,c[n.id]||(function(t,n=r){if("function"!=typeof i.render)throw new Error("Render config function for node not found.");const o=t.path,s={};e.frames&&e.frames.forEach(e=>{s[e.id]=function(n,o=r){const i=e._exe(t,n,o);if(i)return i.path}});const c={inst:i.render(o,n,s,t),scopes:[]};t.comInsts[e.id]=c}(n,o),c[n.id]=!0);const p=n.comInsts[e.id];if(u)for(let o in u){const r=u[o];try{p.inst.inputs[o]=[r,a]}catch(n){"function"==typeof t.onError&&t.onError({type:"node",id:e.id},n)}}i.exe&&i.exe(p.inst,u,a)},e.frames&&e.frames.forEach(e=>{m(e,t)})}!function(e){e[e.FRAME=0]="FRAME",e[e.NODE=1]="NODE",e[e.PIN=2]="PIN",e[e.JOINT=3]="JOINT",e[e.CONNECTION=4]="CONNECTION"}(i||(i={})),function(e){e.each=function(e,...t){t.forEach(t=>{t&&t.forEach(e)})},e.find=function(e,...t){let n;return t.find(t=>{if(t)return n=t.find(t=>e(t))}),n}}(s||(s={}));let f=new WeakMap;function d(e,t,n="runtime"){const o=e.parent.parent.runtime;e.from?a(e.from):console.warn(`组件(${o.title},${o.def.namespace})存在连接断开.`),e.to?a(e.to):console.warn(`组件(${o.title},${o.def.namespace})存在连接断开.`),e._exe=function(n,o,r){const i=t.joint?t.joint(e):void 0,s=e.parent.parent;if("input"==e.type){let t=n.comInsts[s.id].scopes.find(t=>t.hostId===e.parent.id);const c=t=>{i&&i.exe(o),e.to&&e.to._exe(t,o,r,e.type)};if(t){let e=t.hostId;t.parent.comInsts[s.id].scopes.forEach(t=>{t.hostId==e&&c(t)})}else{let t=f.get(e);t||f.set(e,t=new WeakMap);let o=t.get(n);o||t.set(n,o=[]),o.push(c)}}else i&&"function"==typeof i.exe&&i.exe(o),e.to&&e.to._exe(n.parent,o,r,e.type)}}function m(e,t,n="runtime"){e.comAry&&e.comAry.forEach(e=>{p(e,t,n)}),e.inputPins&&e.inputPins.forEach(e=>l(e,t,n)),e.outputPins&&e.outputPins.forEach(e=>l(e,t,n)),e.inputJoints&&e.inputJoints.forEach(e=>d(e,t,n)),e.outputJoints&&e.outputJoints.forEach(e=>d(e,t,n));const o=e,i={};o._startScope=function(){this._scopeManager=function(){let e;function t(t,n,o){let r=e[t];r||(e[t]=r={}),r[n]=o}return{applyScope(e,n){const o=function e(n,o,r,i){let s={id:u(),instId:o,hostId:r,path:void 0,parent:n,returnParams:{},resolve:null,comInsts:{},applyScope(n,o,r,i){const c=e(s,n,r,i);let u=s.comInsts[n];return u&&(!u.scopes&&(u.scopes=[]),u.scopes.push(c)),t(n,r,c),c}};if(i)s.path=s.id;else{const e=[s.id];let t=s.parent;for(;t;)t.parent&&e.push(t.id),t=t.parent;s.path=e.reverse().join(":")}return s}(void 0,e,n);return t(e,n,o),o},getCurrentScope(t,n){var o;return null===(o=e[t])||void 0===o?void 0:o[n]},start(){e={}},stop(){e={}}}}(),this._scopeManager.start()},o._clearScope=function(){this._scopeManager&&(this._scopeManager.stop(),this._scopeManager=void 0)},o._update=function(o,s,c=r){const u=c+o.id,{curScope:a,coms:l}=i[u];e.comAry.forEach(e=>{l.push(e.id),"function"!=typeof e._exe&&(p(e,t,n),e._exe(a,c,void 0,void 0))})},o._exe=function(s,c,u=r,a,l){if(!s){if(e.parent){const t=o._scopeManager.getCurrentScope(e.parent?e.parent.id:e.id,e.id);t&&(s=t.parent)}s||(s=o._scopeManager.applyScope(void 0,e.id+"-parent"))}const d=u+s.id;let m=!1;if(i[d]){const t=i[d].coms;(t.length!==e.comAry.length||e.comAry.find(e=>t.indexOf(e.id)<0))&&(m=!0)}if(!i[d]||m){let c,f;if(o._exeAsRoot_=!!l,u=void 0!==u?u:r,o._exeAsRoot_)c={inst:void 0,scopes:[]};else if(c=s.comInsts[e.parent.id],!c&&e._rootF)return;const m=[];"input"==(a="string"==typeof a?a:"input")&&(f=s.applyScope(!o._exeAsRoot_&&e.parent?e.parent.id:void 0,u,e.id,e._rootF),e.comAry.forEach(e=>{m.push(e.id),"function"!=typeof e._exe&&p(e,t,n),e._autoRun&&e._exe(f,u,void 0,void 0)})),i[d]={myInstScope:c,curScope:f,coms:m}}const{curScope:y}=i[d];if("input"==(a="string"==typeof a?a:"input")){const t={};if("mock"===n&&e.inputPins.length>0&&e.inputPins.forEach(e=>{e.mockData&&(t[e.hostId]=e.mockData)}),c=Object.assign(t,c))for(let t in c){const n=e.inputPins.find(e=>e.hostId==t);n?n._exe(y,c[t],void 0,void 0):"undefined"!=typeof console&&"function"==typeof console.error&&console.error(`No inputPin(id=${t}) found`)}return e.inputJoints&&e.inputJoints.forEach(e=>{!function(e,t){let n=t.parent,o=f.get(e);if(o){let e=o.get(n);e&&e.forEach(e=>{e(t)})}}(e,y)}),y}if(a.match(/^(output)|(inner-input)$/gi)){let t=y;if(e.outputPins.length){if(c)for(let e in c)t.returnParams[e]=c[e]||null;e.outputPins.find(e=>null==t.returnParams[e.hostId])||t.resolve()}}}}let y,h,x=null,g="stop";function b(){return"running"===g}let v={},_={};function j(e,t,n="runtime"){return function(e,t){if(!c(e,t))throw new Error("Invalid item type")}(e,i.FRAME),m(e,t,n),x={on(e,t){e&&"string"==typeof e&&"function"==typeof t&&(_[e.toLowerCase()]=t)},run(t=e,n){if(t._startScope(),function(e){return Object.assign(v,e||{}),y=[],h=[],!0}(n))return g="running",new Promise((e,t)=>{}),e=>{e&&e.outputs&&t.outputPins&&t.outputPins.forEach(t=>{const n=e.outputs[t.id];"function"==typeof n&&(t.proxyPin={_exe(e,t,o,r){n(t)}})});const n=t._exe(void 0,null==e?void 0:e.inputParams,void 0,"input",!0);return e.inputs&&t.inputPins&&Object.keys(e.inputs).forEach(n=>{const o=e.inputs[n],r=t.inputPins.find(e=>e.id===n);r&&r.conAry.length>0&&o(e=>{r._exe(void 0,e,void 0,void 0)})}),n}},update:(t,n=e)=>(n._update(t,void 0,void 0),!0),pause:w,stop(){const t=(g="stop",!0);return x=null,y=void 0,h=void 0,e._clearScope(),t}}}function w(){return g="pause",!0}function E(e,t){const n={_all:{},_waiting:{},has(e){return"function"==typeof this._all[e]},set(e,t){this._all[e]=t;const n=this._waiting[e];if(n)try{n.forEach(e=>{t(e)}),delete this._waiting[e]}finally{}return!0},get(e){return this._all[e]},waiting(e,t){let n=this._waiting[e];n||(n=this._waiting[e]=[]),n.push(t)}},o=u(),r={},i=new Proxy({},{ownKeys(t){const n=[];return s.each(e=>{n.push(e.hostId)},e.inputPins,e.inputPinsInModel),n},getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(e,t,i)=>"__id__"===t?o:"_setInterseptor"===t?e[t]:function(e,o){if(o){const n=o[t];"function"==typeof n&&n(e)}n.set(t,(function(n){const o=r[t];if(void 0!==n&&o){r[t]=void 0;const[o,i]=n;e(o,(function(e){"function"==typeof i&&i(e)}))}}))},set(e,o,i,s){r[o]=i;const c=n.get(o);return c?((null==t?void 0:t.input)&&t.input(),c(i)):n.waiting(o,i),!0}}),c=new Proxy({},{ownKeys(t){const n=[];return s.each(e=>{n.push(e.hostId)},e.outputPins,e.outputPinsInModel),n},getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(n,r,i){if("__id__"===r)return o;if("_setInterseptor"===r)return n[r];if(e.outputPins||e.outputPinsInModel){const n=s.find(({hostId:e})=>r==e,e.outputPins,e.outputPinsInModel);if(n){let o;return function(i,s,c){if(e.outputPins){o=s;const u=function(e){"function"==typeof o&&o(e)};if((null==t?void 0:t.output)&&t.output(i),c){const e=c[r];"function"==typeof e&&e(i)}n._exe(null,i,u,e)}}}}}});return{inputs:i,outputs:c,fork:(e,t)=>e&&"inputs"===e.toLowerCase()?new Proxy(i,{get(e,n){const o=e[n];if("function"==typeof o)return e=>{o(e,t)}}}):e&&"outputs"===e.toLowerCase()?new Proxy(c,{get(e,n){const o=e[n];if("function"==typeof o)return(e,n)=>{o(e,n,t)}}}):void 0}}console.log(`%c ${o.name} %c@${o.version}`,"color:#FFF;background:#fa6400","","")}])},function(e,n){e.exports=t},function(e,t,n){"use strict";var o,r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function c(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},o=[],r=0;r<e.length;r++){var i=e[r],u=t.base?i[0]+t.base:i[0],a=n[u]||0,l="".concat(u," ").concat(a);n[u]=a+1;var p=c(l),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(s[p].references++,s[p].updater(f)):s.push({identifier:l,updater:h(f,t),references:1}),o.push(l)}return o}function a(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,p=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function f(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=p(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function d(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var m=null,y=0;function h(e,t){var n,o,r;if(t.singleton){var i=y++;n=m||(m=a(t)),o=f.bind(null,n,i,!1),r=f.bind(null,n,i,!0)}else n=a(t),o=d.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=c(n[o]);s[r].references--}for(var i=u(e,t),a=0;a<n.length;a++){var l=c(n[a]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=i}}}},function(e,t,n){(t=n(7)(!1)).push([e.i,".slot-8fbc6 {\n  width: 100%;\n  height: 100% !important;\n  position: relative !important;\n}\n.lyFlexColumn-8622a {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-f7c03 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-b252d {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-74f98 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-89e14 {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-ab176 {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-dd54e {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-9e30e {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-cef11 {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-04657 {\n  align-items: flex-end;\n}\n.debugFocus-b6338 {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-62c94 {\n  flex-shrink: 0;\n  z-index: 1;\n}\n.flex-4a4d8 {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-4a4d8 > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-4a4d8 > * {\n  height: 100%;\n}\n.error-6629e {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-81fe0 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-81fe0 .tt-b21cb {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-81fe0 .info-c2559 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),t.locals={slot:"slot-8fbc6",lyFlexColumn:"lyFlexColumn-8622a",lyFlexRow:"lyFlexRow-f7c03",justifyContentFlexStart:"justifyContentFlexStart-b252d",justifyContentFlexCenter:"justifyContentFlexCenter-74f98",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-89e14",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-ab176",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-dd54e",alignItemsFlexStart:"alignItemsFlexStart-9e30e",alignItemsFlexCenter:"alignItemsFlexCenter-cef11",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-04657",debugFocus:"debugFocus-b6338",com:"com-62c94",flex:"flex-4a4d8",error:"error-6629e",errorRT:"errorRT-81fe0",tt:"tt-b21cb",info:"info-c2559"},e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(s=o,c=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(u," */")),i=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[n].concat(i).concat([r]).join("\n")}var s,c,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);o&&r[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";n.r(t),n.d(t,"parse",(function(){return i})),n.d(t,"RenderReact",(function(){return h}));var o=n(2);const r=["inputPins","outputPins","inputPinExts","outputPinsInModel"];function i(e){const t=e.refs,n=s(t,e.slot),o=s(t,e.frame),i=[];return function e(n){const{comAry:o,model:c,def:u,parent:a}=n;if(r.forEach(e=>{const o=n[e];null==o||o.forEach((o,r)=>{var i;const c=s(t,o)||o;if(c){null===(i=c.conAry)||void 0===i||i.forEach((e,n)=>{const o=s(t,e);if(!o)return;const{finishPin:r,startPin:i}=o,u=s(t,r),a=s(t,i);u&&(o.finishPin=u),a&&(o.startPin=a),c.conAry[n]=o});const o=s(t,c.parent);o&&(c.parent=o),n[e][r]=c}})}),c){const o=s(t,c);o&&(e(o),n.model=o)}if(u){const e=u.namespace+"@"+u.version;i.indexOf(e)<=0&&i.push(e)}if(a){const e=s(t,a);e&&(n.parent=e)}null==o||o.forEach((n,r)=>{const i=s(t,n)||n;e(i),o[r]=i})}(o),function e(n){const{comAry:o}=n;null==o||o.forEach((n,r)=>{const i=s(t,n);if(!i)return;const{model:c,parent:u,slots:a}=i;s(t,c)&&(n=i,s(t,i.model)&&(i.model=s(t,i.model)));const l=s(t,u);l&&(n.parent=l),null==a||a.forEach((n,o)=>{const r=s(t,n);r&&(e(r),a[o]=r)}),o[r]=n})}(n),{mainModule:{frame:o,slot:n},requireComs:i}}function s(e,t){const n=null==t?void 0:t._R_;return n&&(null==e?void 0:e[n])}var c=n(3),u=n(1),a=n.n(u),l=n(4),p=n(0);const f={};function d({node:e,comDefs:t,env:n,runtimeCfg:o,logger:r,createPortal:i,slotIo:s,rtMaps:c}){const{slots:a,parent:l,def:h,id:x,model:g,title:b}=e,v=`${h.namespace+"@"+h.version} (id=${x})`;var _,j;_=()=>{throw new Error(v+" 渲染次数过多,代码中可能存在循环依赖的情况,请检查.")},j=v,Object(u.useEffect)(()=>{let e=f[j];void 0===e&&(e={c:0,last:(new Date).getTime()},f[j]=e);const t=(new Date).getTime();t-e.last<34?e.c++:e.c=0,e.last=t,e.c>1e3&&_()});const w=h.rtType;if(w&&w.match(/js/gi))return;const E=g,P=h.namespace+"@"+h.version,C=t[P],I=c[x],{inputs:F,outputs:S,fork:O}=I.io;let k=F,M=S;F&&(null==s?void 0:s.inputs)&&(k=O("inputs",s.inputs)),S&&(null==s?void 0:s.outputs)&&(M=O("outputs",s.outputs));const A={};a&&a.forEach(e=>{A[e.id]={id:e.id,title:e.title,render(...s){const{frames:u}=c[x],a=u[e.id];"function"==typeof a&&a();const l=e.comAry||[];return React.createElement("section",{className:m(e),style:{overflow:"hidden"}},l.map(e=>React.createElement(d,{slotIo:s[0],key:e.id,node:e,comDefs:t,env:n,runtimeCfg:o,logger:r,createPortal:i,rtMaps:c})))},get size(){var t;return(null===(t=e.comAry)||void 0===t?void 0:t.length)||0}}});const N=E.style,R={};switch(!0){case["fixed"].includes(N.position):R.position="fixed",R.zIndex=N.zIndex,"right"===N.fixedX?R.right=N.right+"px":R.left=N.left+"px","bottom"===N.fixedY?R.bottom=N.bottom+"px":R.top=N.top+"px";break;case["absolute"].includes(N.position)||"absolute"===l.style.layout&&void 0===N.position:R.position="absolute",R.zIndex=N.zIndex,R.top=N.top+"px",R.left=N.left+"px"}const T=Object.assign({runtime:o||{}},n||{}),D=function({node:e,style:t}){const n=[p.com];e._focus&&n.push(p.debugFocus);1===t.flex&&n.push(p.flex);return n.join(" ")}({node:e,style:N}),L=function({style:e}){const t={},{width:n,height:o}=e;n?y(n)?t.width=n+"px":n&&(t.width=n):t.width="100%";y(o)?t.height=o+"px":o&&(t.height=o);return t}({style:N}),$=function({style:e}){const t={},{width:n,marginTop:o,marginLeft:r,marginRight:i,marginBottom:s}=e;y(o)&&(t.marginTop=o+"px");y(r)&&("number"==typeof n||r<0?t.marginLeft=r+"px":t.paddingLeft=r+"px");y(i)&&("number"==typeof n||i<0?t.marginRight=i+"px":t.paddingRight=i+"px");y(s)&&(t.marginBottom=s+"px");return t}({style:N});return React.createElement("div",{id:x,style:Object.assign(Object.assign(Object.assign(Object.assign({display:N.display,overflow:"hidden",position:N.position||"relative"},R),L),$),N.ext||{}),className:D},C({slots:A,env:T,data:E.data,title:b,style:N,inputs:k,outputs:M,logger:r(e),createPortal:i}))}function m(e){var t,n;const o=[p.slot],r=e.style;if(r){"flex-column"==(null===(t=r.layout)||void 0===t?void 0:t.toLowerCase())?o.push(p.lyFlexColumn):"flex-row"==(null===(n=r.layout)||void 0===n?void 0:n.toLowerCase())&&o.push(p.lyFlexRow);const e=r.justifyContent;e&&("FLEX-START"===e.toUpperCase()?o.push(p.justifyContentFlexStart):"CENTER"===e.toUpperCase()?o.push(p.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?o.push(p.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?o.push(p.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&o.push(p.justifyContentFlexSpaceBetween));const i=r.alignItems;i&&("FLEX-START"===i.toUpperCase()?o.push(p.alignItemsFlexStart):"CENTER"===i.toUpperCase()?o.push(p.alignItemsFlexCenter):"FLEX-END"===i.toUpperCase()&&o.push(p.alignItemsFlexFlexEnd))}return o.join(" ")}function y(e){return"number"==typeof e&&!isNaN(e)}function h({mainModule:e,comDefs:t,inputParams:n,inputs:o,outputs:r,env:i,runtimeCfg:s,logs:p,logger:f=(()=>{}),createPortal:m=(()=>{})}){return Object(u.useMemo)(()=>{const u=Object.assign({},t),y={},{frame:h,slot:g}=Object(l.observable)(e);Object(c.compile)(h,{node:e=>({render(t,n,o,r){const a=Object(c.createIO)(e,{output(){}});y[e.id]={scopePath:t,frameLable:n,frames:o,io:a};const p=e.def,d=p.rtType;if(d&&d.match(/js/gi)){const t=Object.assign({get curModule(){if(e.parent.parent){const t=e.parent.outputPins,n={};return t.forEach(e=>{n[e.id]=(t,n)=>{e._exe(r,t,n)}}),{outputs:n}}}},s),n=p.namespace+"@"+p.version,o=u[n];if(!o||"function"!=typeof o)throw new Error(`未找到组件(${n})`);o({data:Object(l.clone)(e.model.data),inputs:a.inputs,outputs:a.outputs,env:Object.assign({runtime:t},i||{}),logger:f(e),createPortal:m})}return a}}),pin(e){const t=e.parent?e.parent:void 0;return{exe(n){e.type.match(/^ext$/gi)&&e.direction.match(/^input|inner-output$/gi)&&("show"===e.hostId?e.parent.model.style.display="block":"hide"===e.hostId&&(e.parent.model.style.display="none"));const o="object"==typeof n&&n?JSON.stringify(n):String(n);t&&p&&"function"==typeof p.info&&setTimeout(n=>{p.info({catelog:"程序运行",content:`${t.title} | ${e.title} ${"input"==e.direction||"inner-input"==e.direction?"传入":"传出"} ${o}`,focus(){t._focus=!0},blur(){t._focus=void 0}})})}}}}).run()({inputParams:n,inputs:o,outputs:r});const b=[];return g.comAry.forEach(e=>{b.push(a.a.createElement(x,{key:e.id,title:e.title+" 组件发生错误"},a.a.createElement(d,{node:e,comDefs:u,env:i,runtimeCfg:s,createPortal:m,logger:f,rtMaps:y})))}),b},[])}class x extends a.a.Component{constructor(e){super(e),this.state={error:null,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.errorInfo?a.a.createElement("div",{className:p.errorRT},a.a.createElement("div",{className:p.tt},this.props.title),a.a.createElement("div",{className:p.info},this.state.error&&this.state.error.toString()),a.a.createElement("div",{className:p.stack},this.state.errorInfo.componentStack)):this.props.children}}console.log(`--\x3e ${o.name}@${o.version} <--`)}])}));